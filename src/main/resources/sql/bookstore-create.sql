CREATE TABLE GENRE (
  ID      INT          NOT NULL GENERATED by default AS IDENTITY PRIMARY KEY,
  NAME  VARCHAR(255)   NOT NULL
);


CREATE TABLE BOOK (
 ID   INT   NOT NULL GENERATED by default AS IDENTITY PRIMARY KEY,
 ISBN   VARCHAR(20) NOT NULL CONSTRAINT BOOK_ISBN_UC UNIQUE,
 TITLE   VARCHAR(255) NOT NULL,
 DESCRIPTION VARCHAR(4000) NOT NULL,
 GENRE_ID  INT   CONSTRAINT BOOK_GENRE_FK REFERENCES GENRE,
 PRICE   DOUBLE
);


CREATE TABLE REVIEW (
  ID      INT          NOT NULL GENERATED by DEFAULT AS IDENTITY PRIMARY KEY,
  BOOK_ISBN    VARCHAR(20)  NOT NULL,
  REVIEW_TEXT VARCHAR(4000) NOT NULL,
  REVIEW_TIMESTAMP DATE
);


CREATE TABLE AUTHOR
(
 ID   INT   NOT NULL GENERATED by default AS IDENTITY PRIMARY KEY,
 FIRST_NAME VARCHAR(50) NOT NULL,
 LAST_NAME VARCHAR(50) NOT NULL,
 BIO   VARCHAR(4000) ,
 IMAGE_URL VARCHAR(200)
);


CREATE TABLE BOOK_AUTHOR
(
 AUTHOR_ID INT NOT NULL CONSTRAINT ab_auth_FK REFERENCES AUTHOR,
 BOOK_ID INT NOT NULL CONSTRAINT ab_book_FK REFERENCES BOOK,
 PRIMARY KEY (AUTHOR_ID, BOOK_ID)
);


